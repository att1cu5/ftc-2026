package org.firstinspires.ftc.teamcode;
import com.qualcomm.hardware.rev.RevColorSensorV3;
import java.lang.Object;
import com.qualcomm.robotcore.eventloop.opmode.TeleOp;
import com.qualcomm.robotcore.eventloop.opmode.LinearOpMode;
import com.qualcomm.robotcore.hardware.NormalizedColorSensor;
import com.qualcomm.robotcore.hardware.NormalizedRGBA;

@TeleOp (name = "ColorSensorTest")
public class ColorSensorTest extends LinearOpMode {
    private NormalizedColorSensor test_color;
    
    @Override public void runOpMode() {
        //RevColorSensorV3 test_color;
        test_color = hardwareMap.get(NormalizedColorSensor.class, "test_color");
        double[] motif={0,0,0,0};
        double red=0;
        double green=0;
        double blue=0;
        double sense=0;
        int i=0;
        double tag=0;
        waitForStart();

        while (opModeIsActive()) {
           
            NormalizedRGBA colors = test_color.getNormalizedColors();
            red=colors.red*10;
            green=colors.green*10;
            blue=colors.blue*10;
            sense=0;
            sleep(400); // cycle time for collecting samples can be changed 
            telemetry.clear();
            if(blue>=0.05){
                telemetry.addLine("got purple artifact");
                sense=2;
                motif[i]=sense;
                i=i+1;
                tag=tag+sense;     
                
            }
            if(green>=0.05 && blue<0.05){
                telemetry.addLine("got green artifact");
                sense=1;
                motif[i]=sense;
                i=i+1;
                tag=tag+sense;   
                
            }

            
            
            
            if(tag==5){
                telemetry.clear();
                telemetry.addLine("valid motif");
                if(motif[0]==2){
                    telemetry.addLine("ball one is: purple");
                }
                if(motif[0]==1){
                    telemetry.addLine("ball one is: green");
                }               
                if(motif[1]==2){
                    telemetry.addLine("ball two is: purple");
                }
                if(motif[1]==1){
                    telemetry.addLine("ball two is: green");
                }  
                 if(motif[2]==2){
                    telemetry.addLine("ball three is: purple");
                }
                if(motif[2]==1){
                    telemetry.addLine("ball three is: green");
                }  

                telemetry.update();
                
            }
            if(i==3){
                i=0;
                tag=0;
            }
            if(tag!=5){
              telemetry.update();
            }
        }
    }
}
